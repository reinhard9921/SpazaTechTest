import 'package:flutter/material.dart';import 'package:flutter_bloc/flutter_bloc.dart';import 'package:spaza_tech_test1/Cubit/change_cubit.dart';bool _validate = false;TextEditingController amountController = TextEditingController();class ChangeDenotePage extends StatefulWidget {  @override  _ChangeDenotePageState createState() => _ChangeDenotePageState();}class _ChangeDenotePageState extends State<ChangeDenotePage> {  @override  Widget build(BuildContext context) {    return Scaffold(      appBar: AppBar(        title: Text("Change Calculator"),      ),      body: Container(        padding: EdgeInsets.symmetric(vertical: 16),        alignment: Alignment.center,        child: BlocConsumer<ChangeCubit, ChangeState>(          listener: (context, state) {            if (state is ChangeError) {              ScaffoldMessenger.of(context).showSnackBar(                SnackBar(                  content: Text(state.message),                ),              );            }          },          builder: (context, state) {            if (state is ChangeInitial) {              return buildInitialInput();            } else if (state is ChangeLoaded) {              return buildColumnWithData(state.change);            } else {              return buildInitialInput();            }          },        ),      ),    );  }  Widget buildInitialInput() {    return Center(      child: Column(        children: [          Container(            padding: EdgeInsets.fromLTRB(10, 10, 10, 0),            child: TextField(              controller: amountController,              decoration: InputDecoration(                border: OutlineInputBorder(),                labelText: 'Amount Paid',                errorText: _validate ? 'Please enter Value into Field' : null,                enabledBorder: UnderlineInputBorder(                  borderSide:                      BorderSide(color: Color.fromRGBO(0, 98, 33, 1), width: 1),                ),                focusedBorder: UnderlineInputBorder(                  borderSide:                      BorderSide(color: Color.fromRGBO(0, 98, 33, 1), width: 2),                ),              ),            ),          ),          Container(              height: 55,              padding: EdgeInsets.fromLTRB(10, 10, 10, 0),              child: RaisedButton(                shape: RoundedRectangleBorder(                  borderRadius: BorderRadius.circular(6.0),                ),                textColor: Colors.white,                color: Color.fromRGBO(0, 98, 33, 1),                child: Text('Calculate Change'),                onPressed: () {                  sumbitAmount(context, double.parse(amountController.text));                },              )),        ],      ),    );  }  Widget buildLoading() {    return Center(      child: CircularProgressIndicator(),    );  }  Column buildColumnWithData(List<String> change) {    return Column(      mainAxisAlignment: MainAxisAlignment.spaceEvenly,      children: <Widget>[        Text("Amount Due : R485.40"),        Expanded(            child: ListView.builder(            itemCount: change.length,            itemBuilder: (BuildContext context, int index) {              return new Text(change[index]);            }        )),        SizedBox(height: 20,),        TextField(          controller: amountController,          decoration: InputDecoration(            border: OutlineInputBorder(),            labelText: 'Amount Paid',            errorText: _validate ? 'Please enter Value into Field' : null,            enabledBorder: UnderlineInputBorder(              borderSide:                  BorderSide(color: Color.fromRGBO(0, 98, 33, 1), width: 1),            ),            focusedBorder: UnderlineInputBorder(              borderSide:                  BorderSide(color: Color.fromRGBO(0, 98, 33, 1), width: 2),            ),          ),        ),        Container(            height: 55,            padding: EdgeInsets.fromLTRB(10, 10, 10, 0),            child: RaisedButton(              shape: RoundedRectangleBorder(                borderRadius: BorderRadius.circular(6.0),                //side: BorderSide(color: Colors.red)              ),              textColor: Colors.white,              color: Color.fromRGBO(0, 98, 33, 1),              child: Text('Calculate Change'),              onPressed: () {                sumbitAmount(context, double.parse(amountController.text));              },            )),      ],    );  }  void sumbitAmount(BuildContext context, double amount) {    final changeCubit = context.read<ChangeCubit>();    changeCubit.getChange(amount);  }}